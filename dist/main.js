!function(e){var t={};function n(l){if(t[l])return t[l].exports;var i=t[l]={i:l,l:!1,exports:{}};return e[l].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,l){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:l})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var l=Object.create(null);if(n.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(l,i,function(t){return e[t]}.bind(null,i));return l},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t){let n=null;linesArray=[];const l=Math.PI;let i=!1,c=25,o=c;document.getElementById("sortable");let r=0,a=1,d=[],u=0,s=document.getElementById(`maincanvas${r}`),m=s.getContext("2d");s.width=800,s.height=800;let g=s.getBoundingClientRect();erazercursor="url('./img/cursor.cur'), auto";let y,v,f="none",p=document.getElementById("sizes_canvas"),h=document.getElementById("sizes_pen"),E=document.getElementById("testresolution");E.innerHTML=p.value,m.fillStyle=f,h.onchange=function(){a=this.value,o=c*a},window.onload=function(){let e=document.getElementById(`imgconv${r}`),t=s;e.src=t.toDataURL()},p.onchange=function(){32==this.value?(o=(c=25)*a,E.innerHTML=this.value):64==this.value?(o=(c=12.5)*a,E.innerHTML=this.value):128==this.value&&(o=(c=6.25)*a,E.innerHTML=this.value)};let I,B,b=document.getElementById("mousex"),k=document.getElementById("mousey");function L(e,t){let n=e.getBoundingClientRect();return{x:t.clientX-n.left,y:t.clientY-n.top}}function C(e,t,n){i&&m.fillRect(t,n,o,o)}function $(e,t,n){i&&m.clearRect(t,n,o,o)}document.onmousemove=function(e){e.target&&e.target.id==`maincanvas${r}`&&(y=e.clientX-g.left,v=e.clientY-g.top,b.innerHTML=1+Math.floor(y/c),k.innerHTML=1+Math.floor(v/c))},document.addEventListener("mousedown",function(e){if(e.target&&e.target.id==`maincanvas${r}`){if(null==n)return;if("pen"===n.id){i=!0;let t=L(s,e),n=t.x,l=t.y;C(s,n,l)}if("erazer"===n.id){i=!0;let t=L(s,e),n=t.x,l=t.y;$(s,n,l)}"duplicate"===n.id&&n.classList.remove("active")}}),document.addEventListener("mouseup",function(){i=!1,G(),s.style.cursor="default";let e=s;document.getElementById(`imgconv${r}`).src=e.toDataURL()}),document.addEventListener("mousemove",function(e){if(e.target&&e.target.id==`maincanvas${r}`){if(null==n)return;if("pen"===n.id){s.style.cursor="pointer";let t=L(s,e),n=t.x,l=t.y;C(s,n,l),i&&G(n,l,o,m.fillStyle)}if("erazer"===n.id){s.style.cursor=erazercursor;let t=L(s,e),n=t.x,l=t.y;$(s,n,l)}}}),document.addEventListener("mousemove",function(e){if(e.target&&e.target.id==`maincanvas${r}`){if(null==n)return;if("circledraw"===n.id&&!i)return;if("tonnel"===n.id){if(!i)return;x2=e.clientX-g.left,y2=e.clientY-g.top,function(e,t,n,l){m.lineWidth=1;let i=.5*(n-e),c=.5*(l-t),r=e+i,a=t+c,d=.01,u=2*Math.PI-.01;for(m.beginPath(),m.moveTo(r+i*Math.cos(0),a+c*Math.sin(0));d<u;d+=.01)m.lineTo(r+i*Math.cos(d),a+c*Math.sin(d));m.closePath(),m.strokeStyle=getComputedStyle(j).backgroundColor,m.stroke(),m.lineWidth=o}(I,B,x2,y2)}}}),document.addEventListener("mousedown",function(e){if(e.target&&e.target.id==`maincanvas${r}`){if(null==n)return;"circledraw"===n.id&&(I=e.clientX-g.left,B=e.clientY-g.top,i=!0),"tonnel"===n.id&&(I=e.clientX-g.left,B=e.clientY-g.top,i=!0),"bucket"===n.id&&(m.fillStyle=getComputedStyle(j).backgroundColor,m.fillRect(0,0,s.width,s.height),function(){for(var e=1;e<linesArray.length;e++)m.beginPath(),m.moveTo(linesArray[e-1].x,linesArray[e-1].y),m.lineWidth=linesArray[e].size,m.lineCap="round",m.strokeStyle=linesArray[e].color,m.lineTo(linesArray[e].x,linesArray[e].y),m.stroke()}(),f=m.fillStyle)}}),document.addEventListener("mouseup",function(e){if(e.target&&e.target.id==`maincanvas${r}`){if(null==n)return;if("circledraw"===n.id){let t=L(s,e),n=t.x;t.y;!function(e,t,n,i){m.lineWidth=o;let c=.5*(n-e);m.beginPath(),m.arc(e,t,Math.abs(c),0,2*l,!1),m.strokeStyle=getComputedStyle(j).backgroundColor,m.stroke()}(I,B,n),i=!1}"tonnel"===n.id&&(i=!1);let t=s;document.getElementById(`imgconv${r}`).src=t.toDataURL()}});const S=document.getElementById("bucket"),w=document.getElementById("colours"),M=document.getElementById("circledraw"),x=(document.getElementById("transform"),document.getElementById("framea")),T=document.getElementById("duplicate"),R=document.getElementById("pen"),A=document.getElementById("erazer");let P=document.getElementById("smcircprev");document.getElementById("deleteButton");S.addEventListener("click",_),w.addEventListener("click",_),M.addEventListener("click",_),x.addEventListener("click",function(){z.children.length-1<=parseInt(r,10)?d[u]=s:r=u;u+=1,r+=1,s.remove(),newcanv=document.createElement("canvas"),newcanv.id=`maincanvas${r}`,newcanv.classList.add("maincanvas"),newcanv.width=800,newcanv.height=800,document.getElementById("canvascontainer").appendChild(newcanv),s=document.getElementById(`maincanvas${r}`),m=s.getContext("2d"),g=s.getBoundingClientRect();let e=document.createElement("li");e.setAttribute("draggable",!0),e.classList.add("prevframe"),document.getElementById("sortable").appendChild(e);let t=document.createElement("img");t.classList.add("imgconv"),t.id=`imgconv${r}`,e.appendChild(t),t.src=s.toDataURL();let n=document.createElement("button");n.classList.add("deleteBtn"),n.classList.add("framesButtons"),n.id=`deleteButton${r}`,e.appendChild(n),m.fillStyle=getComputedStyle(j).backgroundColor,clearInterval(X),F(),linesArray=[]}),T.addEventListener("click",_),R.addEventListener("click",_),A.addEventListener("click",_),tonnel.addEventListener("click",_),document.addEventListener("click",function(e){if(z.children.length-1<=parseInt(r,10)&&(d[u]=s),"deleteBtn"===e.target.classList[0]){let t=/\d+/;r=parseInt(e.target.id.match(t)[0],10);let n=document.getElementById(`deleteButton${r}`).parentNode,l=document.getElementById(`imgconv${r}`);n.remove(),l.remove(),function(){for(let e=parseInt(r,10)+1;e<d.length;e++){let t=document.getElementById(`imgconv${e}`);t.id=`imgconv${e-1}`;let n=d[e];n.id=`maincanvas${e-1}`,d[e-1]=n;let l=document.getElementById(`deleteButton${e}`);l.id=`deleteButton${e-1}`}d.pop()}(),u-=1;let i=document.getElementsByClassName("maincanvas")[0];r=parseInt(i.id.match(t)[0],10),q=0,clearInterval(X),F()}});const z=document.getElementById("sortable"),H=document.getElementById("canvascontainer");function _(e){n&&n.classList.remove("active"),(n=e.target).classList.add("active")}z.addEventListener("click",function(e){if("duplicate"===n.id){u+=1,r+=1;const t=e.target.parentNode,n=t.cloneNode(!0);let l=n.firstElementChild,i=n.lastElementChild;l.id=`imgconv${r}`,i.id=`deleteButton${r}`,drglass=s,drglass.id=`maincanvas${r}`,d[u]=drglass,z.appendChild(n),clearInterval(X),F(),z.children.length-1<=parseInt(r,10)&&(d[u]=s)}else{if(z.children.length-1<=parseInt(r,10)&&(d[u]=s),"imgconv"===e.target.classList[0]){let t=/\d+/;r=parseInt(e.target.id.match(t)[0],10),s.remove(),s=d[r],H.appendChild(s),s.id=`maincanvas${r}`,(m=s.getContext("2d")).fillStyle=getComputedStyle(j).backgroundColor}linesArray=[]}}),document.getElementById("clear").addEventListener("click",function(){m.clearRect(0,0,s.width,s.height);let e=s;document.getElementById(`imgconv${r}`).src=e.toDataURL()});const j=document.querySelector(".smcirccur");j.style.background="black";let O=document.querySelectorAll(".p2itemflex div");document.querySelector("#smcircprev").firstElementChild;function D(e){(P=document.getElementById("smcircprev")).style.background=j.style.background,j.style.background=getComputedStyle(e.target).background,m.fillStyle=getComputedStyle(e.target).backgroundColor}P.addEventListener("click",function(){let e=j.style.background;j.style.background=P.style.background,m.fillStyle=P.style.backgroundColor,P.style.background=e});for(let e=0;e<O.length;e+=1)O[e].addEventListener("click",D);const U=document.createElement("input");U.style.opacity="0",U.style.position="absolute",U.type="color",U.style.width="100%",U.style.height="100%",w.appendChild(U),U.parentElement.style.position="relative",U.addEventListener("change",function(e){P=document.getElementById("smcircprev"),"change"===e.type?(P.style.background=j.style.background,j.style.background=U.value,m.fillStyle=U.value):P.style.background=getComputedStyle(e.target).background});let X=null,Y=1,N=document.getElementById("myRange"),W=document.getElementById("framerate");W.innerHTML=N.value,N.oninput=function(){W.innerHTML=this.value,Y=this.value,clearInterval(X),F()},document.getElementById("framerate").innerHTML=Y;let q=0;function F(){let e=document.getElementById("sortable").children.length;X=setInterval(function(){if(e>1)try{const t=document.getElementById("preview");let n=document.getElementById(`imgconv${q}`);t.style.backgroundImage=`url("${n.src}")`,++q==e&&(q=0)}catch{n=document.getElementById(`imgconv${q+1}`)}else{const t=document.getElementById("preview");let n=document.getElementById(`imgconv${q}`);t.style.backgroundImage=`url("${n.src}")`,++q==e&&(q=0)}},1e3/Y)}function G(e,t,n,l){var i={x:e,y:t,size:n,color:l};linesArray.push(i)}document.getElementById("saveToImage").addEventListener("click",function(){var e,t,n;t=`maincanvas${r}`,n=`masterpiece${r}.png`,(e=this).href=document.getElementById(t).toDataURL(),e.download=n},!1)}]);